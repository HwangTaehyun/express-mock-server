{"version":3,"file":"sources-router.js","names":["SourcesRouter","constructor","parser","registerSources","app","isLogEnabled","map","getMap","Object","keys","forEach","path","registerGET","registerPOST","registerPUT","registerDELETE","registerPATCH","pathItem","gets","methods","GET","get","req","res","next","requestHandler","logRegisteredPath","posts","POST","post","puts","PUT","put","deletes","DELETE","delete","patches","PATCH","patch","method","console","log","magenta"],"sources":["../../lib/core/sources-router.js"],"sourcesContent":["import { methods } from '../constants';\nimport { requestHandler } from './request-handler';\n\nexport class SourcesRouter {\n  /**\n   * @param {SourcesParser} parser\n   */\n  constructor(parser) {\n    this.parser = parser;\n  }\n\n  registerSources(app, isLogEnabled) {\n    const map = this.parser.getMap();\n    Object.keys(map).forEach((path) => {\n      this.registerGET(app, path, isLogEnabled);\n      this.registerPOST(app, path, isLogEnabled);\n      this.registerPUT(app, path, isLogEnabled);\n      this.registerDELETE(app, path, isLogEnabled);\n      this.registerPATCH(app, path, isLogEnabled);\n    });\n  }\n\n  registerGET(app, path, map, isLogEnabled) {\n    const pathItem = this.parser.getMap()[path];\n    const gets = pathItem[methods.GET];\n\n    if (gets) {\n      gets.forEach(() => {\n        app.get(path, (req, res, next) => {\n          requestHandler(this.parser, req, res, next);\n        });\n        this.logRegisteredPath(isLogEnabled, methods.GET, path);\n      });\n    }\n  }\n\n  registerPOST(app, path, map, isLogEnabled) {\n    const pathItem = this.parser.getMap()[path];\n    const posts = pathItem[methods.POST];\n    if (posts) {\n      posts.forEach(() => {\n        app.post(path, (req, res, next) => {\n          requestHandler(this.parser, req, res, next);\n        });\n        this.logRegisteredPath(isLogEnabled, methods.POST, path);\n      });\n    }\n  }\n\n  registerPUT(app, path, map, isLogEnabled) {\n    const pathItem = this.parser.getMap()[path];\n    const puts = pathItem[methods.PUT];\n    if (puts) {\n      puts.forEach(() => {\n        app.put(path, (req, res, next) => {\n          requestHandler(this.parser, req, res, next);\n        });\n        this.logRegisteredPath(isLogEnabled, methods.PUT, path);\n      });\n    }\n  }\n\n  registerDELETE(app, path, map, isLogEnabled) {\n    const pathItem = this.parser.getMap()[path];\n    const deletes = pathItem[methods.DELETE];\n    if (deletes) {\n      deletes.forEach(() => {\n        app.delete(path, (req, res, next) => {\n          requestHandler(this.parser, req, res, next);\n        });\n        this.logRegisteredPath(isLogEnabled, methods.DELETE, path);\n      });\n    }\n  }\n\n  registerPATCH(app, path, map, isLogEnabled) {\n    const pathItem = this.parser.getMap()[path];\n    const patches = pathItem[methods.PATCH];\n    if (patches) {\n      patches.forEach(() => {\n        app.patch(path, (req, res, next) => {\n          requestHandler(this.parser, req, res, next);\n        });\n        this.logRegisteredPath(isLogEnabled, methods.PATCH, path);\n      });\n    }\n  }\n\n  /**\n   *  Method to log registered path\n   */\n  logRegisteredPath(isLogEnabled, method, path) {\n    if (isLogEnabled) {\n      console.log(`REG ${method} ${path}`.magenta);\n    }\n  }\n}\n"],"mappings":"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"}